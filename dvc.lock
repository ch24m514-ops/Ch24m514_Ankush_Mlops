schema: '2.0'
stages:
  get_data:
    cmd: python data/get_data.py
    deps:
    - path: data/get_data.py
      hash: md5
      md5: 56b7028b16f17788e7d37e4296a65f37
      size: 295
    outs:
    - path: data/raw/titanic.csv
      hash: md5
      md5: 4602eb98ec9fd5f5d84950203f6b1db8
      size: 62002
  preprocess:
    cmd: python src/preprocess_spark.py --input data/raw/titanic.csv --outdir 
      data/processed
    deps:
    - path: data/raw/titanic.csv
      hash: md5
      md5: 4602eb98ec9fd5f5d84950203f6b1db8
      size: 62002
    - path: params.yaml
      hash: md5
      md5: 8edb582f29dda3b58e7e87f188a176eb
      size: 226
    - path: src/preprocess_spark.py
      hash: md5
      md5: 23826d635530778e710388d1c8d4d37b
      size: 2729
    outs:
    - path: artifacts/train_feature_stats.json
      hash: md5
      md5: c2569df86a13e8e7be062f69684bd903
      size: 1153
    - path: data/processed/test.parquet
      hash: md5
      md5: 23de96c34f539e6389da2a336f2ac03e.dir
      size: 3650
      nfiles: 4
    - path: data/processed/train.parquet
      hash: md5
      md5: eb3b2b95d427a77bb40a4d166ee62237.dir
      size: 6150
      nfiles: 4
  train:
    cmd: python src/train_spark_mlflow.py --train data/processed/train.parquet 
      --test data/processed/test.parquet --outdir artifacts
    deps:
    - path: data/processed/test.parquet
      hash: md5
      md5: 23de96c34f539e6389da2a336f2ac03e.dir
      size: 3650
      nfiles: 4
    - path: data/processed/train.parquet
      hash: md5
      md5: eb3b2b95d427a77bb40a4d166ee62237.dir
      size: 6150
      nfiles: 4
    - path: src/train_spark_mlflow.py
      hash: md5
      md5: ad6438bfc79a93775d4f7b2c5f1a84fa
      size: 2607
    outs:
    - path: artifacts/model.joblib
      hash: md5
      md5: c177bf2edd1619a9eb442270c5c4c5f0
      size: 2535705
  evaluate:
    cmd: python src/evaluate.py --test data/processed/test.parquet
    deps:
    - path: artifacts/best_run.json
      hash: md5
      md5: 04eef69342bfc12426c23eac9cf0bc0c
      size: 392
    - path: data/processed/test.parquet
      hash: md5
      md5: 23de96c34f539e6389da2a336f2ac03e.dir
      size: 3650
      nfiles: 4
    - path: src/evaluate.py
      hash: md5
      md5: 51c7f1fa5ba7e560bb476778a46cb323
      size: 1277
    outs:
    - path: metrics.json
      hash: md5
      md5: 2c97f977f464d464960994447512b584
      size: 186
  register:
    cmd: python src/register_model.py
    deps:
    - path: artifacts/best_run.json
      hash: md5
      md5: 04eef69342bfc12426c23eac9cf0bc0c
      size: 392
    - path: src/register_model.py
      hash: md5
      md5: 72abc38914d8da371609095d0696c058
      size: 1268
